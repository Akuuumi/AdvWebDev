<!DOCTYPE html>
<html style="background: #12142c">

<style type="text/css"></style>
    

<head>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/links.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:1000,200,300,400" rel="stylesheet"> 
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="icon" type="image/jpg" href="images/logo.jpg">
    <script type="text/javascript" src="cookies.js"></script> <!-- Include your cookies.js here -->
    <title>YSJ eSports Society</title>

</head>
     
<!-------------------------- Pages ---------------------------->
    
<header>
    <div class="navbar">
  
        <a href="login.html">Admin</a>
        <a href="index.html">Home</a>
        <a href="join.html">Signups</a>
    </div>
   </header>
  
    <!-- Banner image -->
    <img src="images/banner.jpg" alt="Banner Image" style="width: 100%;">
    
   
<body>
    
    <div class="login">

        <div class="loginContainer">
            <form id="loginEntryForm" method="get">
                <label for="user">Username</label>
                <input type="text" id="user" name="user" placeholder="Insert Username">
                <label for="pass">Password</label>
                <input type="text" id="pass" name="pass" placeholder="Insert Password">
                <input type="submit" id="submitBtn" value="Submit">
            </form>
        </div>


    <!-- Your HTML content here -->

    <!-- Script to call the API and update the page -->
    <script>
    $(document).ready(function() {
        $('#loginEntryForm').on('submit', function(e) {
            e.preventDefault(); // Prevent the form from submitting normally

            var user = $('#user').val();
            var pass = $('#pass').val().trim();
            console.log(user, pass);

            var url = 'http://localhost:5003/users.php/login?user=' + encodeURIComponent(user) + '&pass=' + encodeURIComponent(pass);
            console.log(url);
            
            fetchData(url);
        });

        function fetchData(url) {
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    // Check if the response contains a success message
                    if (data.success) {
                        // Redirect to admin.html on successful login
                        window.location.href = "admin.html";
                    } else {
                        // Handle unsuccessful login
                        console.error("Login failed: " + data.error);
                    }
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.error("Error fetching data: " + textStatus + ", " + errorThrown);
                }
            });
        }
    });


    </script>


<div id="cookies">
    <div class="cookiescontainer">
      <div class="cookiessubcontainer">
        <div class="cookies">
          <p>Please accept our Cookies Policy  <a href="cookies.html">More Info</a></p>
          <button id="cookies-btn">Accept</button>
        </div> 
      </div>
    </div>
  </div>


    </body>
    
<br>
<footer>
    
    
    <div style = "margin-top: 50px">
    <p style = "text-align: center; color: white">Â© YSJVGES 2022</p></div>
        
</footer>    
